{% extends "layout.njk" %}

{% block title -%}
  Home
{%- endblock %}
{% block content %}
{% include "partials/breadcrumb.njk" %}
<main class="wmnds-container wmnds-container--main">
  <div class="wmnds-grid">
    <div class="wmnds-col-1 wmnds-col-md-2-3">
      <h1>Major roadworks<br>and events</h1>
      <p>Last updated: 5 November 2019</p>
    </div>
    <div class="wmnds-col-1 wmnds-col-md-1-3">
      <img src="../img/metro-disruption.png" />
    </div>
  </div>
  <div class="wmnds-grid main">
    <div class="wmnds-col-1 wmnds-col-md-2-3 wmnds-p-r-lg results">
    <form action="#" method="post" id="frmMyform">
      <div class="wmnds-grid">
        <div class="wmnds-col-1-2">
          <h2>Live</h2>
        </div>
        <div class="wmnds-col-1-2">
          <div class="wmnds-float-right">
            <div class="wmnds-fe-dropdown">
                <label for="dropdown" class="fe-title hidden">Dropdown label</label>
                <select name="dropdown" id="areaSelect" class="wmnds-fe-dropdown__select" onchange="resultsFilter(this)">
                    <option value="" selected="selected">Filter by area</option>
                    <option value="1">Birmingham</option>
                    <option value="2">Walsall</option>
                    <option value="3">Coventry</option>
                    <option value="4">Wolverhampton</option>
                </select>
            </div>
          </div>
        </div>
      </div>
      <div class="wmnds-grid tiles liveResults">
        <div class="wmnds-col-1 wmnds-col-md-1-2 tile live1">
        <div class="content">
            <div class="wmnds-content-tile">
                <h2>Hagley Road and Five Ways area</h2>
                <div class="wmnds-content-tile__copy">
                    <ul class="wmnds-content-tile__list">
                        <li><strong>Location:</strong>Birmingham</li>
                        <li><strong>Lasts until:</strong>October 2020</li>
                    </ul>
                    <a href="/major-works-overview.html" title="link title" target="_self" class="wmnds-link wmnds-float-right">
                        Read more
                    </a>
                </div>
            </div>
            </div>
        </div>

        <div class="wmnds-col-1 wmnds-col-md-1-2 tile live1">
        <div class="content">
            <div class="wmnds-content-tile">
                <h2>HS2 - Construction affecting A452 and A446</h2>
                <div class="wmnds-content-tile__copy">
                    <ul class="wmnds-content-tile__list">
                        <li><strong>Location:</strong> Solihull</li>
                        <li><strong>Lasts until:</strong>December 2021</li>
                    </ul>
                    <a href="/major-works-overview.html" title="link title" target="_self" class="wmnds-link wmnds-float-right">
                        Read more
                    </a>
                </div>
            </div>
            </div>
        </div>

        <div class="wmnds-col-1 wmnds-col-md-1-2 tile live2">
        <div class="content">
            <div class="wmnds-content-tile">
                <h2>Dudley regeneration</h2>
                <div class="wmnds-content-tile__copy">
                    <ul class="wmnds-content-tile__list">
                        <li><strong>Location:</strong> Dudley</li>
                        <li><strong>Lasts until:</strong>October 2020</li>
                    </ul>
                    <a href="/major-works-overview.html" title="link title" target="_self" class="wmnds-link wmnds-float-right">
                        Read more
                    </a>
                </div>
            </div>
            </div>
        </div>

        <div class="wmnds-col-1 wmnds-col-md-1-2 tile live1">
        <div class="content">
            <div class="wmnds-content-tile">
                <h2>HS2 Curzon Street Station construction</h2>
                <div class="wmnds-content-tile__copy">
                    <ul class="wmnds-content-tile__list">
                        <li><strong>Location:</strong> Birmingham</li>
                        <li><strong>Lasts until:</strong>January 2026 </li>
                    </ul>
                    <a href="/major-works-overview.html" title="link title" target="_self" class="wmnds-link wmnds-float-right">
                        Read more
                    </a>
                </div>
            </div>
            </div>
        </div>

        <div class="wmnds-col-1 wmnds-col-md-1-2 tile live3">
        <div class="content">
            <div class="wmnds-content-tile">
                <h2>M6 J10</h2>
                <div class="wmnds-content-tile__copy">
                    <ul class="wmnds-content-tile__list">
                        <li><strong>Location:</strong>Walsall</li>
                        <li><strong>Lasts until:</strong>April 2022  </li>
                    </ul>
                    <a href="/major-works-overview.html" title="link title" target="_self" class="wmnds-link wmnds-float-right">
                        Read more
                    </a>
                </div>
            </div>
            </div>
        </div>

        <div class="wmnds-col-1 wmnds-col-md-1-2 tile live2">
        <div class="content">
            <div class="wmnds-content-tile">
                <h2>HS2 construction near the A452, A45 and M42</h2>
                <div class="wmnds-content-tile__copy">
                    <ul class="wmnds-content-tile__list">
                        <li><strong>Location:</strong> Solihull</li>
                        <li><strong>Lasts until:</strong>June 2020 </li>
                    </ul>
                    <a href="/major-works-overview.html" title="link title" target="_self" class="wmnds-link wmnds-float-right">
                        Read more
                    </a>
                </div>
            </div>
            </div>
        </div>

        <div class="wmnds-col-1 noliveresults">No Results</div>

      </div>
      <hr>
      <div class="wmnds-grid">
        <div class="wmnds-col-1-1">
          <h2>Upcoming</h2>
        </div>
      </div>
      <div class="wmnds-grid tiles plannedResults">
        <div class="wmnds-col-1 wmnds-col-md-1-2 tile planned1">
        <div class="content">
            <div class="wmnds-content-tile">
                <h2>Velo Birmingham and Midlands Sunday 21 June 2020</h2>
                <div class="wmnds-content-tile__copy">
                    <ul class="wmnds-content-tile__list">
                        <li><strong>Location:</strong> Birmingham</li>
                        <li><strong>Starts:</strong> June 2020</li>
                        <li> <strong>Lasts until: </strong>June 2020</li>
                    </ul>
                    <a href="/major-works-overview.html" title="link title" target="_self" class="wmnds-link wmnds-float-right">
                        Read more
                    </a>
                </div>
            </div>
            </div>
        </div>

        <div class="wmnds-col-1 wmnds-col-md-1-2 tile planned2">
        <div class="content">
            <div class="wmnds-content-tile">
                <h2>Major Roadworks and events</h2>
                <div class="wmnds-content-tile__copy">
                    <p>See all major roadworks and events. These could affect your journey, plan ahead.</p>
                    <a href="/major-works-overview.html" title="link title" target="_self" class="wmnds-link wmnds-float-right">
                        Read more
                    </a>
                </div>
            </div>
            </div>
        </div>

        <div class="wmnds-col-1 noplannedresults">No Results</div>

      </div>
    </div>
    </form>
    <div class="wmnds-col-1 wmnds-col-md-1-3 sidebar">
      {% include "partials/widgets/sidebar/related-content.njk" %}
      {% include "partials/widgets/body/travel-tips.njk" %}
    </div>
  </div>
</main>
<script>
function resultsFilter(elem) {
    if (elem.value != 0) { // hide the events
        const events = document.querySelectorAll(".tile");
        for (var i = 0; i < events.length; i++) {
            events[i].style.display = 'none';
        }
        liveResults();
        plannedResults();
    } else {
        const events = document.querySelectorAll(".tile");
        let countLive = document.querySelectorAll('.liveResults .tile').length;
        let countPlanned = document.querySelectorAll('.plannedResults .tile').length;
        const noLiveRes = document.querySelector(".noliveresults");
        const noPlannedRes = document.querySelector(".noplannedresults");

        // show all events
        for (var i = 0; i < events.length; i++) {
            events[i].style.display = 'block';
        }
        // show no results message if no results
        if (countLive == 0) {
          noLiveRes.style.display = 'block';
        } else {
          noLiveRes.style.display = 'none';
        }
        if (countPlanned == 0) {
          noPlannedRes.style.display = 'block';
        } else {
          noPlannedRes.style.display = 'none';
        }
    }
}
function liveResults() {
    const e = document.getElementById("areaSelect");
    let value = e.options[e.selectedIndex].value;
    // unhide live events
    let countLive = 0;
    let myElements = document.querySelectorAll('.live' + value);
    for (let i = 0; i < myElements.length; i++) {
        myElements[i].style.display = 'block';
        countLive = countLive + 1;
    }
    // display no results message
    const noLiveRes = document.querySelector(".noliveresults");
    if (countLive == 0) {
        noLiveRes.style.display = 'block';
    } else {
        noLiveRes.style.display = 'none';
    }

}
function plannedResults() {
    const e = document.getElementById("areaSelect");
    let value = e.options[e.selectedIndex].value;
    // unhide planned events
    let countPlanned = 0;
    let myElementss = document.querySelectorAll('.planned' + value);
    for (let i = 0; i < myElementss.length; i++) {
        myElementss[i].style.display = 'block';
        countPlanned = countPlanned + 1;
    }
    // display no results message
    const noPlannedRes = document.querySelector(".noplannedresults");
    if (countPlanned == 0) {
        noPlannedRes.style.display = 'block';
    } else {
        noPlannedRes.style.display = 'none';
    }
}
</script>
{% endblock %}